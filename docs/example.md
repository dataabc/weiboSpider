# å®ä¾‹

ä»¥çˆ¬å–è¿ªä¸½çƒ­å·´çš„å¾®åšä¸ºä¾‹ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹**config.json**æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š

```json
{
    "user_id_list": ["1669879400"],
    "filter": 1,
    "since_date": "1900-01-01",
    "end_date": "now",
    "write_mode": ["csv", "txt", "json"],
    "pic_download": 1,
    "video_download": 1,
    "result_dir_name": 0,
    "cookie": "your cookie"
}
```

å¯¹äºä¸Šè¿°å‚æ•°çš„å«ä¹‰ä»¥åŠå–å€¼èŒƒå›´ï¼Œè¿™é‡Œä»…ä½œç®€å•ä»‹ç»ï¼Œè¯¦ç»†ä¿¡æ¯è§[ç¨‹åºè®¾ç½®](https://github.com/dataabc/weiboSpider/blob/master/docs/settings.md)ã€‚

- **user_id_list**ä»£è¡¨æˆ‘ä»¬è¦çˆ¬å–çš„å¾®åšç”¨æˆ·çš„user_idï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªï¼Œä¹Ÿå¯ä»¥æ˜¯æ–‡ä»¶è·¯å¾„ï¼Œå¾®åšç”¨æˆ·Dear-è¿ªä¸½çƒ­å·´çš„user_idä¸º1669879400ï¼Œå…·ä½“å¦‚ä½•è·å–user_idè§[å¦‚ä½•è·å–user_id](https://github.com/dataabc/weiboSpider/blob/master/docs/userid.md)ï¼›
- **filter**çš„å€¼ä¸º1ä»£è¡¨çˆ¬å–å…¨éƒ¨åŸåˆ›å¾®åšï¼Œå€¼ä¸º0ä»£è¡¨çˆ¬å–å…¨éƒ¨å¾®åšï¼ˆåŸåˆ›+è½¬å‘ï¼‰ï¼›
- **since_date**ä»£è¡¨æˆ‘ä»¬è¦çˆ¬å–since_dateæ—¥æœŸä¹‹åå‘å¸ƒçš„å¾®åšï¼Œå› ä¸ºæˆ‘è¦çˆ¬è¿ªä¸½çƒ­å·´çš„å…¨éƒ¨åŸåˆ›å¾®åšï¼Œæ‰€ä»¥since_dateè®¾ç½®äº†ä¸€ä¸ªéå¸¸æ—©çš„å€¼ï¼›
- **end_date**ä»£è¡¨æˆ‘ä»¬è¦çˆ¬å–end_dateæ—¥æœŸä¹‹å‰å‘å¸ƒçš„å¾®åšï¼Œsince_dateé…åˆend_dateï¼Œè¡¨ç¤ºæˆ‘ä»¬è¦çˆ¬å–å‘å¸ƒæ—¥æœŸåœ¨since_dateå’Œend_dateä¹‹é—´çš„å¾®åšï¼ŒåŒ…å«è¾¹ç•Œï¼Œå¦‚æœend_dateå€¼ä¸º"now"ï¼Œè¡¨ç¤ºçˆ¬å–å‘å¸ƒæ—¥æœŸä»since_dateåˆ°ç°åœ¨çš„å¾®åšï¼›
- **write_mode**ä»£è¡¨ç»“æœæ–‡ä»¶çš„ä¿å­˜ç±»å‹ï¼Œæˆ‘æƒ³è¦æŠŠç»“æœå†™å…¥txtæ–‡ä»¶ã€csvæ–‡ä»¶å’Œjsonæ–‡ä»¶ï¼Œæ‰€ä»¥å®ƒçš„å€¼ä¸º["csv", "txt", "json"]ï¼Œå¦‚æœä½ æƒ³å†™å…¥æ•°æ®åº“ï¼Œå…·ä½“è®¾ç½®è§[è®¾ç½®æ•°æ®åº“](https://github.com/dataabc/weiboSpider/blob/master/docs/settings.md#è®¾ç½®æ•°æ®åº“å¯é€‰)ï¼›
- **pic_download**å€¼ä¸º1ä»£è¡¨ä¸‹è½½å¾®åšä¸­çš„å›¾ç‰‡ï¼Œå€¼ä¸º0ä»£è¡¨ä¸ä¸‹è½½ï¼›
- **video_download**å€¼ä¸º1ä»£è¡¨ä¸‹è½½å¾®åšä¸­çš„è§†é¢‘ï¼Œå€¼ä¸º0ä»£è¡¨ä¸ä¸‹è½½ï¼›
- **result_dir_name**æ§åˆ¶ç»“æœæ–‡ä»¶å¤¹åï¼Œå€¼ä¸º1ä»£è¡¨æ–‡ä»¶å¤¹åæ˜¯ç”¨æˆ·idï¼Œå€¼ä¸º0ä»£è¡¨æ–‡ä»¶å¤¹åæ˜¯ç”¨æˆ·æ˜µç§°ï¼›
- **cookie**æ˜¯çˆ¬è™«å¾®åšçš„cookieï¼Œå…·ä½“å¦‚ä½•è·å–cookieè§[cookieæ–‡æ¡£](https://github.com/dataabc/weiboSpider/blob/master/docs/cookie.md)ï¼Œè·å–cookieåæŠŠ"your cookie"æ›¿æ¢æˆçœŸå®çš„cookieå€¼å³å¯ã€‚

cookieä¿®æ”¹å®Œæˆååœ¨weiboSpiderç›®å½•ä¸‹è¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š

```bash
$ python3 -m weibo_spider
```

ç¨‹åºä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªweiboæ–‡ä»¶å¤¹ï¼Œæˆ‘ä»¬ä»¥åçˆ¬å–çš„æ‰€æœ‰å¾®åšéƒ½è¢«å­˜å‚¨åœ¨è¿™é‡Œã€‚ç„¶åç¨‹åºåœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆä¸€ä¸ªåä¸º"Dear-è¿ªä¸½çƒ­å·´"çš„æ–‡ä»¶å¤¹ï¼Œè¿ªä¸½çƒ­å·´çš„æ‰€æœ‰å¾®åšçˆ¬å–ç»“æœéƒ½åœ¨è¿™é‡Œã€‚"Dear-è¿ªä¸½çƒ­å·´"æ–‡ä»¶å¤¹é‡ŒåŒ…å«ä¸€ä¸ªcsvæ–‡ä»¶ã€ä¸€ä¸ªtxtæ–‡ä»¶ã€ä¸€ä¸ªjsonæ–‡ä»¶ã€ä¸€ä¸ªimgæ–‡ä»¶å¤¹å’Œä¸€ä¸ªvideoæ–‡ä»¶å¤¹ï¼Œimgæ–‡ä»¶å¤¹ç”¨æ¥å­˜å‚¨ä¸‹è½½åˆ°çš„å›¾ç‰‡ï¼Œvideoæ–‡ä»¶å¤¹ç”¨æ¥å­˜å‚¨ä¸‹è½½åˆ°çš„è§†é¢‘ã€‚å¦‚æœä½ è®¾ç½®äº†ä¿å­˜æ•°æ®åº“åŠŸèƒ½ï¼Œè¿™äº›ä¿¡æ¯ä¹Ÿä¼šä¿å­˜åœ¨æ•°æ®åº“é‡Œï¼Œæ•°æ®åº“è®¾ç½®è§[è®¾ç½®æ•°æ®åº“](https://github.com/dataabc/weiboSpider/blob/master/docs/settings.md#è®¾ç½®æ•°æ®åº“å¯é€‰)éƒ¨åˆ†ã€‚

## csvç»“æœæ–‡ä»¶å¦‚ä¸‹æ‰€ç¤º

*1669879400.csv*

![](https://picture.cognize.me/cognize/github/weibospider/weibo_csv.png)

## txtç»“æœæ–‡ä»¶å¦‚ä¸‹æ‰€ç¤º

*1669879400.txt*

![](https://picture.cognize.me/cognize/github/weibospider/weibo_txt.png)

jsonæ–‡ä»¶åŒ…å«è¿ªä¸½çƒ­å·´çš„ç”¨æˆ·ä¿¡æ¯å’Œä¸Šåƒæ¡å¾®åšä¿¡æ¯ï¼Œå†…å®¹è¾ƒå¤šã€‚ä¸ºäº†è¡¨è¾¾æ¸…æ™°ï¼Œè¿™é‡Œä»…å±•ç¤ºä¸¤æ¡å¾®åšã€‚

## jsonç»“æœæ–‡ä»¶å¦‚ä¸‹æ‰€ç¤º

*1669879400.json*

```json
{
    "user": {
        "id": "1669879400",
        "nickname": "Dear-è¿ªä¸½çƒ­å·´",
        "gender": "å¥³",
        "location": "ä¸Šæµ·",
        "birthday": "åŒå­åº§",
        "description": "ä¸€åªå–œæ¬¢é»˜é»˜è¡¨æ¼”çš„å°é€æ˜ã€‚å·¥ä½œè”ç³»jaywalk@jaywalk.com.cn ğŸ’",
        "verified_reason": "å˜‰è¡Œä¼ åª’ç­¾çº¦æ¼”å‘˜",
        "talent": "",
        "education": "ä¸Šæµ·æˆå‰§å­¦é™¢",
        "work": "å˜‰è¡Œä¼ åª’ ",
        "weibo_num": 1121,
        "following": 250,
        "followers": 66395910
    },
    "weibo": [
        {
            "id": "IonM9ryMy",
            "content": "2019#å¾®åšä¹‹å¤œ#ç››å…¸å³å°†å¼€å¯ï¼Œä»¥å¾®åšä¹‹åŠ›ï¼Œè®©ä¸–ç•Œæ›´ç¾ã€‚1æœˆ11æ—¥ï¼Œä¸è§ä¸æ•£@å¾®åšä¹‹å¤œ Â åŸå›¾Â ",
            "original_pictures": "http://wx1.sinaimg.cn/large/63885668ly1gao0a01kfzj20ku112k98.jpg",
            "video_url": "æ— ",
            "publish_place": "æ— ",
            "publish_time": "2020-01-07 14:59",
            "publish_tool": "æ— ",
            "up_num": 239242,
            "retweet_num": 71914,
            "comment_num": 55916
        },
        {
            "id": "InB4Df73X",
            "content": "#happyNEOyear#éƒ½åˆ°äº†2020ï¼Œè¿˜ä¸æ¢ç‚¹æ–°poseé…æ–°è£…[ä¾†] ç©¿ä¸Š@adidasneo è¿ªå£«å°¼è”åæ¬¾ï¼Œè®©#ç”Ÿæ¥å¥½åŠ¨#çš„æˆ‘ä»¬ä¸€èµ·ç©â€œæ–°â€å¤§å‘ã€è‡ªæ‹ä¸é‡æ ·ğŸ¤³http://t.cn/AiF7nREj adidasneoçš„å¾®åšè§†é¢‘ Â ",
            "original_pictures": "æ— ",
            "video_url": "http://f.video.weibocdn.com/000pYrGmlx07zPTskBQQ010412008AOY0E010.mp4?label=mp4_hd&template=852x480.25.0&trans_finger=62b30a3f061b162e421008955c73f536&Expires=1578569162&ssig=IV3JEbh3Zu&KID=unistore,video",
            "publish_place": "æ— ",
            "publish_time": "2020-01-02 11:00",
            "publish_tool": "æ— ",
            "up_num": 275419,
            "retweet_num": 376734,
            "comment_num": 131069
        }
    ]
}
```

## ä¸‹è½½çš„å›¾ç‰‡å¦‚ä¸‹æ‰€ç¤º

*imgæ–‡ä»¶å¤¹*

![](https://picture.cognize.me/cognize/github/weibospider/img.png)

æœ¬æ¬¡ä¸‹è½½äº†793å¼ å›¾ç‰‡ï¼Œå¤§å°ä¸€å…±1.21GBï¼ŒåŒ…æ‹¬å¥¹åŸåˆ›å¾®åšä¸­çš„å›¾ç‰‡å’Œè½¬å‘å¾®åšè½¬å‘ç†ç”±ä¸­çš„å›¾ç‰‡ã€‚å›¾ç‰‡åä¸ºyyyymmdd+å¾®åšidçš„å½¢å¼ï¼Œè‹¥æŸæ¡å¾®åšå­˜åœ¨å¤šå¼ å›¾ç‰‡ï¼Œåˆ™å›¾ç‰‡åä¸­è¿˜ä¼šåŒ…æ‹¬å®ƒåœ¨å¾®åšå›¾ç‰‡ä¸­çš„åºå·ã€‚è‹¥æŸå¼ å›¾ç‰‡å› ä¸ºç½‘ç»œç­‰åŸå› ä¸‹è½½å¤±è´¥ï¼Œç¨‹åºåˆ™ä¼šä»¥â€œweibo_id:pic_urlâ€çš„å½¢å¼å°†å‡ºé”™å¾®åšidå’Œå›¾ç‰‡urlå†™å…¥åŒæ–‡ä»¶å¤¹ä¸‹çš„not_downloaded.txté‡Œï¼›

## ä¸‹è½½çš„è§†é¢‘å¦‚ä¸‹æ‰€ç¤º

*videoæ–‡ä»¶å¤¹*

![](https://picture.cognize.me/cognize/github/weibospider/video.png)

æœ¬æ¬¡ä¸‹è½½äº†70ä¸ªè§†é¢‘ï¼Œæ˜¯å¥¹åŸåˆ›å¾®åšä¸­çš„è§†é¢‘ï¼Œè§†é¢‘åä¸ºyyyymmdd+å¾®åšidçš„å½¢å¼ã€‚å…¶ä¸­æœ‰ä¸€ä¸ªè§†é¢‘å› ä¸ºç½‘ç»œåŸå› ä¸‹è½½å¤±è´¥ï¼Œç¨‹åºå°†å®ƒçš„å¾®åšidå’Œè§†é¢‘urlä»¥â€œweibo_id:video_urlâ€çš„å½¢å¼å†™åˆ°äº†åŒæ–‡ä»¶å¤¹ä¸‹çš„not_downloaded.txté‡Œã€‚

å› ä¸ºæˆ‘æœ¬åœ°æ²¡æœ‰å®‰è£…MySQLæ•°æ®åº“å’ŒMongoDBæ•°æ®åº“ï¼Œæ‰€ä»¥æš‚æ—¶è®¾ç½®æˆä¸å†™å…¥æ•°æ®åº“ã€‚å¦‚æœä½ æƒ³è¦å°†çˆ¬å–ç»“æœå†™å…¥æ•°æ®åº“ï¼Œåªéœ€è¦å…ˆå®‰è£…æ•°æ®åº“ï¼ˆMySQLæˆ–MongoDBï¼‰ï¼Œå†å®‰è£…å¯¹åº”åŒ…ï¼ˆpymysqlæˆ–pymongoï¼‰ï¼Œç„¶åå°†mysql_writeæˆ–mongodb_writeå€¼è®¾ç½®ä¸º1å³å¯ã€‚å†™å…¥MySQLéœ€è¦ç”¨æˆ·åã€å¯†ç ç­‰é…ç½®ä¿¡æ¯ï¼Œè¿™äº›é…ç½®å¦‚ä½•è®¾ç½®è§[è®¾ç½®æ•°æ®åº“](https://github.com/dataabc/weiboSpider/blob/master/docs/settings.md#è®¾ç½®æ•°æ®åº“å¯é€‰)éƒ¨åˆ†ã€‚
